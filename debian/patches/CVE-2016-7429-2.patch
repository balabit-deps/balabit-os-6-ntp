

    TOPntp-stable1.3688.1.33 changes

NTP - Network Time Protocol
#### ChangeSet ####

2016-10-01 08:32:28+00:00, stenn@psp-deb1.ntp.org
  [Bug 3072] tweaks

#==== NEWS ====
#
#2016-10-01 08:31:51+00:00, stenn@psp-deb1.ntp.org +16 -1
#  [Bug 3072] tweaks
#--- 1.188/NEWS	2016-09-29 12:03:11 +00:00
#+++ 1.189/NEWS	2016-10-01 08:31:51 +00:00
#@@ -8,7 +8,22 @@ following X high- and Y low-severity vul
# In addition to bug fixes and enhancements, this release fixes the
# following X high- and Y low-severity vulnerabilities:
# 
#-*
#+* Attack on interface selection
#+   Date Resolved: xx October 2016; Dev (4.3.94) XX October 2016
#+X  References: Sec 3072 / CVE-2016-XXXX / VU#XXXXX
#+X  Affects: ntp-4.2.8p7, and ntp-4.3.92.
#+X  CVSS2: HIGH 7.8 (AV:N/AC:L/Au:N/C:N/I:N/A:C)
#+X  CVSS3: HIGH 7.5 CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H
#+X  Summary: 
#+X  Mitigation:
#+        Implement BCP-38.
#+        Upgrade to 4.2.8p8, or later, from the NTP Project Download Page
#+	    or the NTP Public Services Project Download Page
#+        If you cannot upgrade from 4.2.8p7, the only other alternatives
#+	    are to patch your code or filter CRYPTO_NAK packets.
#+        Properly monitor your ntpd instances, and auto-restart ntpd
#+	    (without -g) if it stops running. 
#+   Credit: This weakness was discovered by Miroslav Lichvar of Red Hat.
# 
# Other fixes:
# 
#
#==== ntpd/ntp_peer.c ====
#
#2016-10-01 08:28:25+00:00, stenn@psp-deb1.ntp.org +6 -1
#  [Bug 3072] tweaks
--- 1.159/ntpd/ntp_peer.c	2016-09-13 05:26:06 +00:00
+++ 1.160/ntpd/ntp_peer.c	2016-10-01 08:28:25 +00:00
@@ -626,8 +626,13 @@ set_peerdstadr(
 {
 	struct peer *	unlinked;
 
+	DEBUG_INSIST(p != NULL);
+
+	if (p == NULL)
+		return;
+
 	/* check for impossible or identical assignment */
-	if (p == NULL || p->dstadr == dstadr)
+	if (p->dstadr == dstadr)
 		return;
 
 	/*


